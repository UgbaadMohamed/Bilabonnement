<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="/contract.css">
</head>
<body>
<div class="contractform" style="display: flex; flex-wrap: wrap;">

    <form th:action="@{/contractInfo}" method="post" onsubmit="return validateForm()">


    <label for="contract_start_date">Start Date :</label>
    <input type="text" name="contract_start_date" id="contract_start_date" required/>

    <label for="contract_end_date">End date:</label>
         <input type="text" name="contract_end_date" id="contract_end_date" required/>

        <label for="contract_maximum_km">Max KM:</label>
        <input type="text" name="contract_maximum_km" id="contract_maximum_km" required/>


        <input type="hidden" name="customer_id" th:value="${customer.customer_id}">
        <input type="hidden" name="car_id" th:value="${car.car_id}">

     <button type="submit" value="Save changes" style="background-color: #4CAF50" >
        </button>

        <script>
            function validateForm() {
                var startDate = document.getElementById("contract_start_date").value;
                var endDate = document.getElementById("contract_end_date").value;
                var errorMessage = document.getElementById("error_message");

                // Calculate the duration in months
                var durationInMonths = calculateDurationInMonths(startDate, endDate);

                // Check if the duration is bigger than 36 months
                if (durationInMonths > 36) {
                    errorMessage.innerText = "Varigheden er ikke gyldig. Vælg venligst en varighed på mindre end 36 måneder.";
                    return false; // Prevent form submission
                }

                // Clear the error message if the duration is valid
                errorMessage.innerText = "";

                // Other form validation logic

                return true;
            }

            function calculateDurationInMonths(contract_start_date, contract_end_date) {
                var start = new Date(contract_start_date);
                var end = new Date(contract_end_date);

                var yearDiff = end.getFullYear() - start.getFullYear();
                var monthDiff = end.getMonth() - start.getMonth();
                var totalMonths = yearDiff * 12 + monthDiff;

                if (end.getDate() < start.getDate()) {
                    totalMonths--;
                }

                return totalMonths;
            }

        </script>

        <!-- Form fields -->

        <p id="error_message" style="color: red;"></p>

        <!-- Submit button -->



    </form>



</div>
</body>
</html>